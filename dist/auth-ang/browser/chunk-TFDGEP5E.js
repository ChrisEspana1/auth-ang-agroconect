import{a as U}from"./chunk-6EL4LVNF.js";import{c as W,f as R,g as D,h as L,i as z,j as B,q,s as G}from"./chunk-MCBS46X7.js";import{$a as P,Ba as b,Bb as h,Ea as I,Fb as y,Ja as v,Ua as m,Va as n,Vb as T,Wa as r,Wb as F,Z as u,Zb as k,_,ab as O,bb as f,db as p,fb as d,fc as N,pb as M,sa as E,tb as c,ua as l,ub as S,vb as w,wb as V,xb as g,yb as C,zb as x}from"./chunk-T52MBMFP.js";import"./chunk-RA2WU32H.js";function A(a,s){if(a&1){let i=f();n(0,"div",7)(1,"form",8),p("ngSubmit",function(){u(i);let e=d();return _(e.agregarContenido())}),n(2,"label"),c(3,"T\xEDtulo:"),r(),n(4,"input",9),x("ngModelChange",function(e){u(i);let o=d();return C(o.nuevoContenido.titulo,e)||(o.nuevoContenido.titulo=e),_(e)}),r(),n(5,"label"),c(6,"Descripci\xF3n:"),r(),n(7,"textarea",10),x("ngModelChange",function(e){u(i);let o=d();return C(o.nuevoContenido.descripcion,e)||(o.nuevoContenido.descripcion=e),_(e)}),r(),n(8,"label"),c(9,"URL Recurso:"),r(),n(10,"input",11),x("ngModelChange",function(e){u(i);let o=d();return C(o.nuevoContenido.url_recurso,e)||(o.nuevoContenido.url_recurso=e),_(e)}),r(),n(11,"button",12),c(12,"Guardar contenido"),r()()()}if(a&2){let i=d();l(4),g("ngModel",i.nuevoContenido.titulo),l(3),g("ngModel",i.nuevoContenido.descripcion),l(3),g("ngModel",i.nuevoContenido.url_recurso)}}function H(a,s){if(a&1){let i=f();P(0),n(1,"form",16),p("ngSubmit",function(){u(i);let e=d().index,o=d(3);return _(o.guardarCambios(e))}),n(2,"label"),c(3,"T\xEDtulo:"),r(),n(4,"input",17),x("ngModelChange",function(e){u(i);let o=d().$implicit;return C(o.titulo,e)||(o.titulo=e),_(e)}),r(),n(5,"label"),c(6,"Descripci\xF3n:"),r(),n(7,"textarea",17),x("ngModelChange",function(e){u(i);let o=d().$implicit;return C(o.descripcion,e)||(o.descripcion=e),_(e)}),r(),n(8,"label"),c(9,"URL Recurso:"),r(),n(10,"input",17),x("ngModelChange",function(e){u(i);let o=d().$implicit;return C(o.url_recurso,e)||(o.url_recurso=e),_(e)}),r(),n(11,"button",12),c(12,"Guardar"),r(),n(13,"button",18),p("click",function(){u(i);let e=d(4);return _(e.cancelarEdicion())}),c(14,"Cancelar"),r()(),O()}if(a&2){let i=d(),t=i.$implicit,e=i.index;l(4),m("name",h("titulo",e)),g("ngModel",t.titulo),l(3),m("name",h("descripcion",e)),g("ngModel",t.descripcion),l(3),m("name",h("url",e)),g("ngModel",t.url_recurso)}}function J(a,s){if(a&1){let i=f();n(0,"h3"),c(1),r(),n(2,"p")(3,"strong"),c(4,"Descripci\xF3n:"),r(),c(5),r(),n(6,"p")(7,"strong"),c(8,"Recurso:"),r(),n(9,"a",19),c(10),r()(),n(11,"button",20),p("click",function(){u(i);let e=d().index,o=d(3);return _(o.modificarContenido(e))}),c(12,"Modificar"),r()}if(a&2){let i=d().$implicit;l(),S(i.titulo),l(4),w(" ",i.descripcion),l(4),m("href",i.url_recurso,E),l(),S(i.url_recurso)}}function K(a,s){if(a&1&&(n(0,"div",15),v(1,H,15,9,"ng-container",13)(2,J,13,4,"ng-template",null,1,y),r()),a&2){let i=s.index,t=M(3),e=d(3);l(),m("ngIf",e.editandoIndice===i)("ngIfElse",t)}}function Q(a,s){if(a&1&&(n(0,"div"),v(1,K,4,2,"div",14),r()),a&2){let i=d(2);l(),m("ngForOf",i.contenidos)}}function X(a,s){a&1&&(n(0,"p"),c(1,"No hay contenidos disponibles para este curso."),r())}function Y(a,s){if(a&1&&(n(0,"div"),v(1,Q,2,1,"div",13)(2,X,2,0,"ng-template",null,0,y),r()),a&2){let i=M(3),t=d();l(),m("ngIf",t.contenidos.length>0)("ngIfElse",i)}}var re=(()=>{let s=class s{constructor(t,e){this.route=t,this.cursoService=e,this.mostrarFormularioNuevo=!1,this.contenidos=[],this.editandoIndice=null,this.nuevoContenido={id:0,curso_id:"",titulo:"",descripcion:"",url_recurso:""}}ngOnInit(){this.cursoId=this.route.snapshot.paramMap.get("id"),this.nuevoContenido.curso_id=this.cursoId,this.cursoService.getCursoPorId(this.cursoId).subscribe({next:t=>{this.cursoNombre=t.titulo},error:t=>console.error("Error al obtener el curso",t)}),this.cargarContenidos()}cargarContenidos(){this.cursoService.getContenidosPorCurso(this.cursoId).subscribe({next:t=>this.contenidos=t,error:t=>console.error("Error al cargar contenidos",t)})}agregarContenido(){if(!this.nuevoContenido.titulo||!this.nuevoContenido.descripcion||!this.nuevoContenido.url_recurso){alert("Todos los campos son obligatorios");return}let t={curso_id:this.cursoId,titulo:this.nuevoContenido.titulo,descripcion:this.nuevoContenido.descripcion,url_recurso:this.nuevoContenido.url_recurso};this.cursoService.crearContenido(this.cursoId,t).subscribe({next:e=>{console.log("Contenido agregado:",e),alert("Contenido agregado correctamente"),this.cargarContenidos(),this.nuevoContenido={id:0,curso_id:this.cursoId,titulo:"",descripcion:"",url_recurso:""},this.mostrarFormularioNuevo=!1},error:e=>console.error("Error al agregar contenido",e)})}modificarContenido(t){this.editandoIndice=t}cancelarEdicion(){this.editandoIndice=null}guardarCambios(t){let e=this.contenidos[t];this.cursoService.actualizarContenido(e.curso_id,e.id,e).subscribe({next:()=>{console.log("Contenido actualizado"),alert("Contenido actualizado correctamente"),this.editandoIndice=null},error:o=>console.error("Error al actualizar contenido",o)})}toggleFormularioNuevo(){this.mostrarFormularioNuevo=!this.mostrarFormularioNuevo}volverEdicionCurso(){window.history.back()}};s.\u0275fac=function(e){return new(e||s)(b(N),b(U))},s.\u0275cmp=I({type:s,selectors:[["app-content"]],decls:14,vars:5,consts:[["sinContenidos",""],["vistaContenido",""],[1,"cabecera"],[1,"botones-acciones"],[1,"boton-principal",3,"click"],["class","formulario-curso",4,"ngIf"],[4,"ngIf"],[1,"formulario-curso"],[3,"ngSubmit"],["name","nuevoTitulo","required","",3,"ngModelChange","ngModel"],["name","nuevoDescripcion","required","",3,"ngModelChange","ngModel"],["name","nuevoUrl","required","",3,"ngModelChange","ngModel"],["type","submit",1,"boton-principal"],[4,"ngIf","ngIfElse"],["class","contenido-card",4,"ngFor","ngForOf"],[1,"contenido-card"],[1,"formulario-curso",3,"ngSubmit"],["required","",3,"ngModelChange","ngModel","name"],["type","button",1,"boton-secundario",3,"click"],["target","_blank",3,"href"],[1,"boton-secundario",3,"click"]],template:function(e,o){e&1&&(n(0,"div",2)(1,"h2"),c(2,"Gesti\xF3n de Contenidos del Curso"),r(),n(3,"div",3)(4,"button",4),p("click",function(){return o.toggleFormularioNuevo()}),c(5),r(),n(6,"button",4),p("click",function(){return o.volverEdicionCurso()}),c(7," Regresar a la edici\xF3n del curso "),r()()(),n(8,"p"),c(9,"Esta es la lista de proveedores del curso: "),n(10,"strong"),c(11),r()(),v(12,A,13,3,"div",5)(13,Y,4,2,"div",6)),e&2&&(l(5),w(" ",o.mostrarFormularioNuevo?"Ocultar formulario":"Agregar nuevo contenido"," "),l(6),V("",o.cursoId,"-",o.cursoNombre),l(),m("ngIf",o.mostrarFormularioNuevo),l(),m("ngIf",!o.mostrarFormularioNuevo))},dependencies:[k,T,F,G,B,W,R,D,q,z,L],styles:["h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{color:#725c3a;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;margin-bottom:10px}p[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{color:#809671}.cabecera[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.botones-acciones[_ngcontent-%COMP%]{display:flex;gap:6px}.contenido-card[_ngcontent-%COMP%]{background-color:#f3e5ab;border:1px solid #d2a880;padding:15px;margin-bottom:15px;border-radius:6px;box-shadow:0 2px 4px #725c3a0d}.contenido-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0}.contenido-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}a[_ngcontent-%COMP%]{color:#809671;text-decoration:none}a[_ngcontent-%COMP%]:hover{text-decoration:underline}.formulario-curso[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #d2a880;padding:20px;border-radius:6px;box-shadow:0 2px 6px #725c3a1a;max-width:600px}.formulario-curso[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-top:10px;font-weight:700}.formulario-curso[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .formulario-curso[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:8px;margin-top:4px;border:1px solid #a7c796;border-radius:4px;font-family:inherit}.formulario-curso[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.boton-principal[_ngcontent-%COMP%]{margin-top:15px;background-color:#809671;color:#fff;border:none;padding:10px 16px;border-radius:4px;cursor:pointer;font-weight:700}.boton-principal[_ngcontent-%COMP%]:hover{background-color:#a7c796}.boton-secundario[_ngcontent-%COMP%]{margin-top:10px;background-color:#d2a880;color:#fff;border:none;padding:8px 12px;border-radius:4px;cursor:pointer;font-weight:700}.boton-secundario[_ngcontent-%COMP%]:hover{background-color:#725c3a}"]});let a=s;return a})();export{re as ContentComponent};
