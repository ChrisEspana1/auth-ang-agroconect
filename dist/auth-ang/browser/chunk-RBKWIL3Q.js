import{a as q}from"./chunk-6EL4LVNF.js";import{c as V,f as T,g as W,h as z,i as R,j as A,q as G,s as j}from"./chunk-MCBS46X7.js";import{$a as M,Ba as f,Bb as I,Ea as K,Fb as h,Ja as g,Ua as _,Va as n,Vb as P,Wa as i,Wb as O,Z as m,Zb as N,_ as u,ab as S,bb as b,db as p,fb as d,fc as F,pb as x,tb as c,ua as s,ub as k,vb as v,wb as E,xb as w,yb as y,zb as C}from"./chunk-T52MBMFP.js";import"./chunk-RA2WU32H.js";function L(r,l){if(r&1){let o=b();n(0,"div",7)(1,"p"),c(2,"A\xF1adiendo palabra clave al curso: "),n(3,"strong"),c(4),i()(),n(5,"form",8),p("ngSubmit",function(){m(o);let e=d();return u(e.agregarKeyword())}),n(6,"label"),c(7,"Palabra clave:"),i(),n(8,"input",9),C("ngModelChange",function(e){m(o);let a=d();return y(a.nuevaKeyword.palabra,e)||(a.nuevaKeyword.palabra=e),u(e)}),i(),n(9,"button",10),c(10,"Guardar"),i()()()}if(r&2){let o=d();s(4),k(o.cursoId),s(4),w("ngModel",o.nuevaKeyword.palabra)}}function B(r,l){if(r&1){let o=b();M(0),n(1,"form",8),p("ngSubmit",function(){m(o);let e=d().index,a=d(3);return u(a.guardarCambios(e))}),n(2,"input",14),C("ngModelChange",function(e){m(o);let a=d().$implicit;return y(a.palabra,e)||(a.palabra=e),u(e)}),i(),n(3,"button",10),c(4,"Guardar"),i(),n(5,"button",15),p("click",function(){m(o);let e=d(4);return u(e.cancelarEdicion())}),c(6,"Cancelar"),i()(),S()}if(r&2){let o=d(),t=o.$implicit,e=o.index;s(2),_("name",I("palabra",e)),w("ngModel",t.palabra)}}function H(r,l){if(r&1){let o=b();n(0,"p")(1,"strong"),c(2,"Palabra:"),i(),c(3),i(),n(4,"button",16),p("click",function(){m(o);let e=d().index,a=d(3);return u(a.modificarKeyword(e))}),c(5,"Modificar"),i()}if(r&2){let o=d().$implicit;s(3),v(" ",o.palabra)}}function J(r,l){if(r&1&&(n(0,"div",13),g(1,B,7,3,"ng-container",11)(2,H,6,1,"ng-template",null,1,h),i()),r&2){let o=l.index,t=x(3),e=d(3);s(),_("ngIf",e.editandoIndice===o)("ngIfElse",t)}}function Q(r,l){if(r&1&&(n(0,"div"),g(1,J,4,2,"div",12),i()),r&2){let o=d(2);s(),_("ngForOf",o.keywords)}}function U(r,l){r&1&&(n(0,"p"),c(1,"No hay palabras clave para este curso."),i())}function X(r,l){if(r&1&&(n(0,"div"),g(1,Q,2,1,"div",11)(2,U,2,0,"ng-template",null,0,h),i()),r&2){let o=x(3),t=d();s(),_("ngIf",t.keywords.length>0)("ngIfElse",o)}}var ne=(()=>{let l=class l{constructor(t,e){this.route=t,this.cursoService=e,this.keywords=[],this.mostrarFormularioNuevo=!1,this.editandoIndice=null,this.nuevaKeyword={id:0,curso_id:"",palabra:""}}ngOnInit(){this.cursoId=this.route.snapshot.paramMap.get("id"),this.nuevaKeyword.curso_id=this.cursoId,this.cursoService.getCursoPorId(this.cursoId).subscribe({next:t=>{this.cursoNombre=t.titulo},error:t=>console.error("Error al obtener el curso",t)}),this.cargarKeywords()}cargarKeywords(){this.cursoService.getKeywordsPorCurso(this.cursoId).subscribe({next:t=>this.keywords=t,error:t=>console.error("Error al cargar keywords",t)})}agregarKeyword(){if(!this.nuevaKeyword.palabra.trim()){alert("La palabra clave es obligatoria");return}this.cursoService.crearKeyword(this.cursoId,{palabra:this.nuevaKeyword.palabra}).subscribe({next:()=>{alert("Keyword agregada correctamente"),this.cargarKeywords(),this.nuevaKeyword.palabra="",this.mostrarFormularioNuevo=!1},error:()=>alert("Error al agregar keyword")})}modificarKeyword(t){this.editandoIndice=t}guardarCambios(t){let e=this.keywords[t];this.cursoService.actualizarKeyword(e.curso_id,e.id,{palabra:e.palabra}).subscribe({next:()=>{alert("Keyword actualizada correctamente"),this.editandoIndice=null},error:()=>alert("Error al actualizar keyword")})}cancelarEdicion(){this.editandoIndice=null}volverEdicionCurso(){window.history.back()}toggleFormularioNuevo(){this.mostrarFormularioNuevo=!this.mostrarFormularioNuevo}};l.\u0275fac=function(e){return new(e||l)(f(F),f(q))},l.\u0275cmp=K({type:l,selectors:[["app-keywords"]],decls:14,vars:5,consts:[["sinKeywords",""],["vistaKeyword",""],[1,"cabecera"],[1,"botones-acciones"],[1,"boton-principal",3,"click"],["class","formulario-curso",4,"ngIf"],[4,"ngIf"],[1,"formulario-curso"],[3,"ngSubmit"],["name","palabra","required","",3,"ngModelChange","ngModel"],["type","submit",1,"boton-principal"],[4,"ngIf","ngIfElse"],["class","contenido-card",4,"ngFor","ngForOf"],[1,"contenido-card"],["required","",3,"ngModelChange","ngModel","name"],["type","button",1,"boton-secundario",3,"click"],[1,"boton-secundario",3,"click"]],template:function(e,a){e&1&&(n(0,"div",2)(1,"h2"),c(2,"Gesti\xF3n de Palabras Clave"),i(),n(3,"div",3)(4,"button",4),p("click",function(){return a.toggleFormularioNuevo()}),c(5),i(),n(6,"button",4),p("click",function(){return a.volverEdicionCurso()}),c(7," Regresar a la edici\xF3n del curso "),i()()(),n(8,"p"),c(9,"Esta es la lista de palabras clave del curso: "),n(10,"strong"),c(11),i()(),g(12,L,11,2,"div",5)(13,X,4,2,"div",6)),e&2&&(s(5),v(" ",a.mostrarFormularioNuevo?"Ocultar formulario":"Agregar nueva palabra clave"," "),s(6),E("",a.cursoId,"-",a.cursoNombre),s(),_("ngIf",a.mostrarFormularioNuevo),s(),_("ngIf",!a.mostrarFormularioNuevo))},dependencies:[N,P,O,j,A,V,T,W,G,R,z],styles:[".cabecera[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}p[_ngcontent-%COMP%]{color:#006400;font-weight:600}.cabecera[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#006400;font-size:24px;font-weight:700}.botones-acciones[_ngcontent-%COMP%]{display:flex;gap:8px}.boton-principal[_ngcontent-%COMP%]{background-color:#006400;color:#fff;border:none;padding:.6rem 1rem;border-radius:4px;font-weight:700;cursor:pointer;transition:background-color .3s ease}.boton-principal[_ngcontent-%COMP%]:hover{background-color:#004d00}.boton-secundario[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#006400;border:1px solid #ccc;padding:.6rem 1rem;border-radius:4px;font-weight:700;cursor:pointer}.boton-secundario[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.formulario-curso[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ccc;border-radius:8px;padding:1.5rem;margin-bottom:1rem;box-shadow:0 2px 6px #0064001a}.formulario-curso[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:#006400}.formulario-curso[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-bottom:1rem;border:1px solid #ccc;border-radius:4px;font-size:16px}.contenido-card[_ngcontent-%COMP%]{background-color:#f9f9f9;border:1px solid #ddd;padding:15px;margin-bottom:10px;border-radius:6px;box-shadow:0 2px 4px #0000000d}.contenido-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:#006400;font-weight:500}@media (max-width: 768px){.cabecera[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.botones-acciones[_ngcontent-%COMP%]{flex-direction:column;width:100%}.boton-principal[_ngcontent-%COMP%], .boton-secundario[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem;text-align:center}}"]});let r=l;return r})();export{ne as KeywordsComponent};
